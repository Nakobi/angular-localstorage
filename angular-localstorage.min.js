/*! angular-localstorage 03-01-2014 */
angular.module("jigijigi.angular.storage.ChromeLocalStorage",[]).constant("ERROR",{ITEM_NOT_FOUND:"Item not found"}).factory("ChromeLocalStorage",["$window","$q",function(a,b){var c=a.chrome.storage.local;return{get:function(d){var e=b.defer(),f=c.get(d,function(b){!b||a.chrome.runtime.lastError?(console.error(a.chrome.runtime.lastError),e.reject(ERROR.ITEM_NOT_FOUND)):e.resolve(f)});return e.promise()},set:function(){},remove:function(){},clear:function(){var d=b.defer();return c.clear(function(){a.chrome.runtime.lastError?d.reject(a.chrome.runtime.lastError):d.resolve()}),d.promise}}}]),angular.module("jigijigi.angular.storage.GenericLocalStorage",[]).constant("ERROR",{ITEM_NOT_FOUND:"Item not found"}).factory("GenericLocalStorage",["$window","$q","ERROR",function(a,b,c){var d=a.localStorage;return{get:function(a){var e=b.defer();return"string"==typeof a?!function(){var b=d.getItem(a);b?e.resolve({keys:b}):e.reject(c.ITEM_NOT_FOUND)}():a.hasOwnProperty("length")?!function(){for(var b={},c=0,f=a.length;f>c;c++){var g=d.getItem(a[c]);b[a[c]]=g}e.resolve(b)}():"object"==typeof a?!function(){for(var b=Object.keys(a),c={},f=0,g=b.length;g>f;f++){var h=d.getItem(b[f]);c[b[f]]=h}e.resolve(angular.extend(a,c))}():e.resolve({}),e.promise()},set:function(){},remove:function(){},clear:function(){var a=b.defer();try{d.clear(),a.resolve()}catch(c){a.reject(c)}return a.promise}}}]),angular.module("jigijigi.angular.storage",["jigijigi.angular.storage.GenericLocalStorage","jigijigi.angular.storage.ChromeLocalStorage"]).constant("STORAGE",{GENERIC:"GenericLocalStorage",CHROME:"ChromeLocalStorage"}).factory("LocalStorage",["$window","$q","$injector","STORAGE",function(a,b,c,d){var e=null;return e=a.chrome&&a.chrome.app.isInstalled?c.get(d.CHROME):c.get(d.GENERIC)}]);